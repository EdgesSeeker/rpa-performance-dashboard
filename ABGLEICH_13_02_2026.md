# Abgleich 13.02.2026 – Orchestrator-CSV vs. Tagesansicht

## Referenz: Deine Orchestrator-CSV

- **Datei:** `jobs-1b4bdd9a-2ec0-4e32-b388-ffb396751c9b-2026-02-14-11-56-37-463-193486.csv`
- **Auswertung:** Nur Robots **RPA-DONALD-001** und **RPA-MICKY-002** (Hostname in der CSV).
- **Tag:** 13.02.2026, Kalendertag 00:00–23:59. Es zählen alle Jobs, die **mit dem 13.02. überlappen** (also auch z. B. Start 12.02. 23:00, Ende 13.02. 00:00:47). Start/Ende werden auf den Tag beschnitten.

## Erwartete Werte aus der CSV (berechnet mit `verify_13_02_from_orchestrator_csv.py`)

| Robot           | Idle (ungenutzte Stunden) |
|-----------------|---------------------------|
| RPA-DONALD-001  | 9,01 h                    |
| RPA-MICKY-002   | 7,78 h                    |
| **Summe (Leerlauf)** | **16 h 47 min**     |

- **Anzahl Jobs am 13.02. (überlappend):** 34 (nur RPA-DONALD-001 / RPA-MICKY-002).

## Was im Dashboard geändert wurde

- Die **Tagesansicht** („Leerlauf pro Tag“) filtert jetzt **überlappende** Jobs:
  - Es werden alle Jobs berücksichtigt, die **den Tag schneiden** (Start vor Ende des Tages, Ende nach Start des Tages).
  - Vorher wurden nur Jobs gezählt, die **am 13.02. gestartet** sind. Dadurch fehlten z. B. Übernacht-Jobs (12.02. 23:00 – 13.02. 00:00:47) und die Leerlauf-Berechnung wich von der CSV-Referenz ab.
- Mit der neuen Logik sollte der **Leerlauf für den 13.02. im Dashboard bei 16 h 47 min** liegen (sofern die gleichen Jobs wie in der CSV in der DB sind).

## So prüfst du den Abgleich

1. **Skript ausführen (Referenz aus CSV):**
   ```bash
   cd rpa-performance-system
   python verify_13_02_from_orchestrator_csv.py
   ```
   → Ausgabe: erwarteter Leerlauf **16 h 47 min** und pro Robot die Leerlauf-Intervalle.

2. **Dashboard starten und 13.02. prüfen:**
   - Filter z. B. „7 Tage“ oder „Eigener Bereich“ so wählen, dass der **13.02.2026** enthalten ist.
   - Unter **„Leerlauf pro Tag“** den Eintrag **13.02.2026** öffnen.
   - **Vergleichen:**
     - Angezeigter Leerlauf (Donald + Mickey) ≈ **16 h 47 min**
     - Anzahl und Zeiten der Jobs/Leerlauf-Intervalle in der Tabelle sollten mit der Skript-Ausgabe bzw. der CSV übereinstimmen.

3. **Falls die DB andere Jobs hat als die CSV:**  
   Die CSV ist dein manueller Export zu einem bestimmten Zeitpunkt. Wenn der Sync danach weitere Jobs für den 13.02. geholt hat (oder weniger), können die Zahlen leicht abweichen. Dann ist die CSV-Referenz der Maßstab für „stimmt die Berechnungslogik?“ – und die Logik (Überlappung, Clipping, Summe Donald + Mickey) ist mit dem Skript und dem angepassten Dashboard abgedeckt.

## Kurzfassung

- **Erwarteter Leerlauf 13.02.2026 (aus CSV): 16 h 47 min.**
- Dashboard „Leerlauf pro Tag“ nutzt jetzt dieselbe Tageslogik (Überlappung + Clipping).
- Vergleich: `verify_13_02_from_orchestrator_csv.py` ausführen und mit der Tagesansicht 13.02. im Dashboard vergleichen.
